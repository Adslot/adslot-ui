import Props from '../containers/Props.jsx';
import DesignNotes from '../containers/DesignNotes.jsx';
import { popoverPlacements, themes } from '../../src/components/Popover/constants';

## Popover

```jsx live=true
<div style={{ width: 150, display: 'flex', justifyContent: 'space-between' }}>
  <Popover
    delayHide={200}
    placement="right"
    title="Popover Title"
    theme="dark"
    popoverContent="My initial positioning is right"
  >
    <Button>Hover Me</Button>
  </Popover>
  <Popover
    placement="bottom"
    triggers="click"
    title="Popover Title"
    theme="success"
    popoverContent="My initial positioning is bottom"
  >
    <Button color="success">Click Me</Button>
  </Popover>
</div>
```

## hoverable Popover

Setting `contentHoverable` keeps the popover open when hovering over its content.  
A small `delayHide` can help prevent unintended closes.  
Use `isMenu` if the content is interactable.

```jsx live=true
const Input = () => {
  const [value, setValue] = React.useState('');
  const onChange = (e) => {
    setValue(e.target.value);
  };
  return <input className="form-control" type="text" onChange={onChange} value={value} />;
};

const Example = () => {
  const [open, setIsOpen] = React.useState();
  const onOpen = (open, event, eventType) => {
    setIsOpen(open);
  };
  return (
    <div style={{ width: 150, display: 'flex', justifyContent: 'space-between' }}>
      <Popover
        delayHide={200}
        isMenu
        isOpen={open}
        onOpenChange={onOpen}
        contentHoverable
        placement="bottom-start"
        theme="light"
        popoverContent={
          <div>
            <h4>Hoverable popover</h4>
            <p>You can keep this popover open</p>
            <p>by hovering over it.</p>
            <div style={{ display: 'flex' }}>
              <Input />
              <Button onClick={() => onOpen(false)}>Save</Button>
            </div>
          </div>
        }
      >
        <Button variant="link">Hover me</Button>
      </Popover>
    </div>
  );
};
render(<Example />);
```

<br />

This example shows how to use an external trigger with `triggerRef` and an external anchor with `anchorRef`.

```jsx live=true
const myRef = React.createRef(null);

const Example = () => {
  const [isOpen, setIsOpen] = React.useState(false);
  const togglePopover = () => setIsOpen(!isOpen);
  const triggerRef = React.useRef();
  return (
    <React.Fragment>
      <button ref={triggerRef}>Toggle Popover</button>
      <div
        style={{
          width: 100,
          border: '1px solid black',
          display: 'flex',
          justifyContent: 'center',
          alignItems: 'center',
        }}
        ref={myRef}
      >
        External Anchor
      </div>

      <Popover
        triggers="hover"
        contentHoverable
        anchorRef={myRef}
        triggerRef={triggerRef}
        placement="right"
        title="Popover title"
        theme="dark"
        popoverContent="My initial positioning is right"
      />
    </React.Fragment>
  );
};
render(
  <div style={{ display: 'flex', width: 300, justifyContent: 'space-between' }}>
    <Example />
  </div>
);
```

<br />
<br />
<h4>Use Popover triggers as an alternative to Popover.WithRef.</h4>
<h4>Code will be leaner with the following way.</h4>

```jsx live=true
const Example = () => {
  const [safeMode, setSafeMode] = React.useState(true);
  const toggleSafeMode = () => setSafeMode(!safeMode);

  return (
    <React.Fragment>
      <Button onClick={toggleSafeMode}>{`Turn ${safeMode ? 'off' : 'on'} Safe Mode`}</Button>
      <Popover
        isOpen={safeMode}
        triggers={safeMode ? ['hover'] : ['disabled']}
        placement="right"
        theme="dark"
        popoverContent="Safe mode, not able to launch"
      >
        <Button disabled={safeMode}>Launch</Button>
      </Popover>
    </React.Fragment>
  );
};

render(
  <div style={{ display: 'flex', width: 300, justifyContent: 'space-between' }}>
    <Example />
  </div>
);
```

<br />
<br />
<h4>Popover autoflips when overflowing container</h4>

```jsx live=true
<div
  style={{
    width: '500px',
    height: '250px',
    border: '1px solid black',
    overflow: 'hidden',
    overflowX: 'scroll',
  }}
>
  <div style={{ width: '600px', position: 'relative', top: '100px', left: '250px' }}>
    <Popover
      triggers="click"
      placement="left"
      title="Popover Title"
      theme="dark"
      popoverContent={`My initial positioning is left`}
      modifiers={{
        name: 'preventOverflow',
        options: {
          altAxis: true,
          altBoundary: true,
        },
      }}
    >
      <Button>Click me and scroll container</Button>
    </Popover>
  </div>
</div>
```

<Props componentName="Popover" />
